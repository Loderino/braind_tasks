## Сущности

Исходя из описания задания, можно выделить следующий набор сущностей для базы данных:
- Статья
- Подраздел
- Автор
- Посетитель (Пользователь)
- Комментарий
- Оценка
- Тег

## Отношения

```
Каждая публикация должна быть размещена как минимум в одном подразделе, но может быть и в нескольких.
```
Данное требование означает наличие отношения m:n, что потребует создания промежуточной таблицы `Статья_Подраздел`.
___

```
Автором статьи могут быть несколько человек, каждый из которых может написать множество статей.
```
Данное требование означает наличие отношения m:n, что потребует создания промежуточной таблицы `Статья_Автор`.
___

```
Есть возможность добавить к каждой публикации комментарий (любым посетителем).
```
Данное требование означает наличие неидентифицирующего отношения n:1 между сущностями `Комментарий` и `Пользователь`, т.к. каждый пользователь может добавлять множество комментариев, но каждый комментарий относится только к одному пользователю.
Также необходимо неидентифицирующее отношение n:1 между сущностями `Комментарий` и `Статья`, т.к. каждая статья может иметь множество комментариев, но каждый комментарий относится только к одной статье.
___

```
Каждая статья может быть оценена любым посетителем.
```
Данное требование означает наличие идентифицирующего отношения n:1 между сущностями `Статья` и `Оценка`, и такого же отношения между сущностями `Пользователь` и `Оценка`. По сути оценка будет представлять из себя промежуточную таблицу для соединения Статьи и Пользователя отношением n:m, т.к. каждый пользователь может оставлять оценку на множестве статей, и каждая статья может быть оценена множеством пользователей.
___

```
Все публикации помечены тематическим тегом (для удобства группировки).
```
Из данного требования непонятно, помечается публикация только одним тегом, или можно помечать несколькими. Универсальное решение - отношение n:m между таблицами `Тег` и `Статья`. Для этого понадобится промежуточная таблица `Статья_Тег`.

## Таблицы

### Статья (Article)

#### Атрибуты:
- id - первичный ключ
- Заголовок
- Анонс
- Атрибуты
- время создания

#### Примечания
Никакой из информационных атрибутов или их комбинаций не могут исполнять роль первичного ключа из-за неуникальности или большого размера. Было принято решение ввести суррогатный ключ id.

Так как состав атрибутов не определён и может быть непостоянным, то тип данного поля - JSON. Также этот атрибут может принимать значение NULL.

### Подраздел (Subsection)

#### Атрибуты:
- id - первичный ключ
- Название

#### Примечания
Название является потенциальным ключом, если все названия будут уникальными. Но название может быть длинным и неудобным для использования в качестве ключа. Поэтому используется суррогатный ключ id.

### Автор (Author)

#### Атрибуты:
- id - первичный ключ
- имя
- фамилия

#### Примечания
Ни имя, ни Фамилия, ни их комбинация не могут быть уникальными. Поэтому в качестве первичного ключа используется суррогатный ключ id.

### Посетитель (Visitor)

#### Атрибуты:
- id - первичный ключ
- имя
- фамилия
- id сессии
- время создания записи

#### Примечания
В задании был особый акцент на том, что посетитель может быть любым. Если подразумевается возможность регистрации на нашем ресурсе, то даже незарегистрированные посетители могут оставлять комментарии и оценки. Соответственно, в базе должны быть записи и о незарегистрированных пользователях. Было непонятно, стоит ли отражать в базе данных механизм идентификации подобных пользователей, или это никак не связано. Было решено добавить атрибут session_id для реализации хоть какого-то способа идентификации.

Так как есть незарегистрированные посетители, то фамилия и имя могут принимать значения NULL.

id сессии может быть первичным ключом, но вероятны ситуации, когда его нужно будет изменять. Поэтому здесь также первичный суррогатный ключ id.

### Комментарий (Comment)

#### Атрибуты:
- id - первичный ключ
- текст
- время отправления комментария
- id статьи - внешний ключ
- id пользователя - внешний ключ

#### Примечания
Первичный суррогатный ключ id, так как другие атрибуты не могут гарантировать уникальности.

### Оценка (Grade)

#### Атрибуты:
- значение 
- id статьи - внешний первичный ключ
- id пользователя - внешний первичный ключ

### Примечания
Неизвестно, какой разброс оценок предполагает наш ресурс. 10-бальная или просто лайк-дизлайк. Универсальное решение - сделать атрибут `значение` с типом TINYINT. Это позволяет сделать разброс оценок на 255 пунктов, что подойдёт и для 10-бальной, и для 2-бальной системы оценок.

id статьи и id пользователя - являются составным первичным ключом. Так как от каждого пользователя каждой статье может быть лишь одна оценка, сочетание этих двух атрибутов будет всегда уникальным.

### Тег (Tag)

#### Атрибуты:
- id - первичный ключ
- Название

#### Примечания
Те же примечания, что и для таблицы Subsection.

### Связующие таблицы Article_Tag, Article_Author, Article_Subsection

### Атрибуты
- id из первой таблицы - внешний первичный ключ
- id из второй таблицы - внешний первичный ключ

## Ссылки

- [схема БД для MySQL Workbench](./db_model.mwb)
- [png изображение схемы БД](./shcema.png)
- [скрипт создания структуры БД](./db_creation_script.sql)
- [скрипт наполнения БД](./filling_script.sql)
- [запрос из задания](./query.sql)

## Примечания

Все данные для наполнения базы данных из файла filling_script.sql были получены с помощью библиотек для создания фейковых данных или взяты с ресурса https://panorama.pub/.